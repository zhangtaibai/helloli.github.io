<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>magnifier</title>
</head>
<body>
    <img id="pic" src="360.png" style="border:1px solid #ccc">
    <!-- <div id="pic" style="border:1px solid #ccc">aaaaaaaaa</div> -->
    <div id="dp" style="padding:0;margin:200px;width:300px;height:300px;border:1px solid #ccc">
        
    </div>

    <script>
        /**
         * 放大镜函数
         * @Author   LeeSir
         * @Email    lzhbupt@163.com
         * @Datetime 2016-06-30T10:35:14+0800
         * @param    {[type]}                 el   [description]    需要放大的img元素
         * @param    {[type]}                 dp   [description]    需要将放大效果显示的目标元素
         * @param    {[type]}                 time [description]    放大倍数
         * @return   {[type]}                      [description]
         */
        function magnifier (el, dp, time) {

            // dp.style.overflow = 'hidden';

            el.onload = function () {
                w = el.width;
                h = el.height;
            };

            el.onmouseover = function (e) {
                dp.innerHTML = '';
                var np = el.cloneNode();
                // np.width *= time;
                // np.height *= time;
                var dpw = parseInt(dp.style.width);
                var dph = parseInt(dp.style.height);
                dp.appendChild(np);
                np.style.transform = 'scale(' + time + ')';
                console.log(np.width);
                el.onmousemove = function (e) {
                    np.style.marginTop = (dph - e.offsetY * time) + 'px';
                    np.style.marginLeft = (dpw - e.offsetX * time) + 'px';
                };
            };

            el.onmouseout = function () {
                // dp.innerHTML = '';
            }

        }

        var $ = function (el) {
            return document.querySelector(el);
        };
        magnifier($('#pic'), $('#dp'), 5);
    </script>
</body>
</html>